{
  "version": 3,
  "sources": ["../../../app/routes/_index.tsx", "../../../app/components/ProductCard.tsx", "../../../app/hooks/useDebounce.ts"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app\\\\\\\\routes\\\\\\\\_index.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app\\\\routes\\\\_index.tsx\");\n  import.meta.hot.lastModified = \"1758340726892.6704\";\n}\n// REMIX HMR END\n\nimport React, { useState } from \"react\";\nimport { json } from \"@remix-run/node\";\nimport { useLoaderData, useNavigate, useSearchParams } from \"@remix-run/react\";\nimport { ProductCard } from \"../components/ProductCard\";\nimport { createGraphQLClient, GET_PRODUCTS } from \"../lib/graphql-client\";\nimport { useDebounce } from \"../hooks/useDebounce\";\nexport async function loader({\n  request\n}) {\n  const url = new URL(request.url);\n  const query = url.searchParams.get(\"query\") || \"\";\n  const tag = url.searchParams.get(\"tag\") || \"\";\n  const after = url.searchParams.get(\"after\") || \"\";\n  const client = createGraphQLClient();\n  try {\n    const result = await client.request(GET_PRODUCTS, {\n      query: query || undefined,\n      tag: tag || undefined,\n      after: after || undefined,\n      first: 12\n    });\n    return json({\n      products: result.products,\n      query,\n      tag\n    });\n  } catch (error) {\n    console.error(\"Failed to load products:\", error);\n    return json({\n      products: {\n        edges: [],\n        pageInfo: {\n          hasNextPage: false\n        },\n        totalCount: 0\n      },\n      query,\n      tag\n    });\n  }\n}\nexport default function Index() {\n  _s();\n  const {\n    products,\n    query: initialQuery,\n    tag: initialTag\n  } = useLoaderData();\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const [searchQuery, setSearchQuery] = useState(initialQuery);\n  const [selectedTag, setSelectedTag] = useState(initialTag);\n\n  // INTENTIONAL BUG: Search debounce race condition\n  // The debounced value triggers navigation but doesn't cancel previous requests\n  const debouncedQuery = useDebounce(searchQuery, 400);\n\n  // Navigate when debounced query changes\n  React.useEffect(() => {\n    const params = new URLSearchParams();\n    if (debouncedQuery) params.set(\"query\", debouncedQuery);\n    if (selectedTag) params.set(\"tag\", selectedTag);\n    const newUrl = params.toString() ? `/?${params.toString()}` : \"/\";\n    navigate(newUrl, {\n      replace: true\n    });\n  }, [debouncedQuery, selectedTag, navigate]);\n  const allTags = Array.from(new Set(products.edges.flatMap(edge => edge.node?.tags || []).filter(Boolean))).sort();\n  return <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">\n          Our Products\n        </h1>\n        \n        <div className=\"flex flex-col sm:flex-row gap-4 mb-6\">\n          <div className=\"flex-1\">\n            <input data-testid=\"search-input\" type=\"text\" placeholder=\"Search products...\" value={searchQuery} onChange={e => setSearchQuery(e.target.value)} className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\" />\n          </div>\n          \n          <div>\n            <select value={selectedTag} onChange={e => setSelectedTag(e.target.value)} className=\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\">\n              <option value=\"\">All Categories</option>\n              {allTags.map(tag => <option key={tag} value={tag}>\n                  {tag.charAt(0).toUpperCase() + tag.slice(1)}\n                </option>)}\n            </select>\n          </div>\n        </div>\n\n        {(searchQuery || selectedTag) && <div className=\"mb-4\">\n            <p className=\"text-sm text-gray-600\">\n              {products.totalCount} product{products.totalCount !== 1 ? 's' : ''} found\n              {searchQuery && ` for \"${searchQuery}\"`}\n              {selectedTag && ` in category \"${selectedTag}\"`}\n            </p>\n          </div>}\n      </div>\n\n      {products.edges.length > 0 ? <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n          {products.edges.map(edge => <ProductCard key={edge.node?.id || edge.cursor} product={edge.node} />)}\n        </div> : <div className=\"text-center py-12\">\n          <p className=\"text-gray-500 text-lg\">No products found</p>\n          {(searchQuery || selectedTag) && <p className=\"text-gray-400 mt-2\">\n              Try adjusting your search or filter\n            </p>}\n        </div>}\n\n      {products.pageInfo.hasNextPage && <div className=\"mt-8 text-center\">\n          <button onClick={() => {\n        const params = new URLSearchParams(searchParams);\n        params.set(\"after\", products.pageInfo.endCursor);\n        navigate(`/?${params.toString()}`);\n      }} className=\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700\">\n            Load More\n          </button>\n        </div>}\n    </div>;\n}\n_s(Index, \"Ub3dVdfwYzpj+PXsjhcx9f9m5gw=\", false, function () {\n  return [useLoaderData, useNavigate, useSearchParams, useDebounce];\n});\n_c = Index;\nvar _c;\n$RefreshReg$(_c, \"Index\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app\\\\\\\\components\\\\\\\\ProductCard.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app\\\\components\\\\ProductCard.tsx\");\n  import.meta.hot.lastModified = \"1758340726700.7207\";\n}\n// REMIX HMR END\n\nimport { Link } from \"@remix-run/react\";\nimport { formatMoney } from \"shared\";\nexport function ProductCard({\n  product\n}) {\n  return <div data-testid=\"product-card\" className=\"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow\">\n      <Link to={`/products/${product.slug}`}>\n        <div className=\"aspect-w-1 aspect-h-1 w-full overflow-hidden bg-gray-200\">\n          {product.imageUrl ? <img src={product.imageUrl} alt={product.name} className=\"h-48 w-full object-cover\" /> : <div className=\"h-48 w-full bg-gray-100 flex items-center justify-center\">\n              <span className=\"text-gray-400 text-4xl\">\uD83D\uDCE6</span>\n            </div>}\n        </div>\n        \n        <div className=\"p-4\">\n          <h3 className=\"text-sm font-medium text-gray-900 mb-1\">\n            {product.name}\n          </h3>\n          \n          {product.description && <p className=\"text-sm text-gray-500 mb-2 line-clamp-2\">\n              {product.description}\n            </p>}\n          \n          <div className=\"flex items-center justify-between\">\n            <span className=\"text-lg font-semibold text-gray-900\">\n              {formatMoney(product.price)}\n            </span>\n            \n            {!product.inStock && <span className=\"text-sm text-red-600 font-medium\">\n                Out of Stock\n              </span>}\n          </div>\n          \n          <div className=\"mt-2 flex flex-wrap gap-1\">\n            {product.tags.map(tag => <span key={tag} className=\"inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded\">\n                {tag}\n              </span>)}\n          </div>\n        </div>\n      </Link>\n    </div>;\n}\n_c = ProductCard;\nvar _c;\n$RefreshReg$(_c, \"ProductCard\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app\\\\hooks\\\\useDebounce.ts\"\n);\nimport.meta.hot.lastModified = \"1758340726725.6785\";\n}\n// REMIX HMR END\n\nimport { useState, useEffect } from \"react\";\n\n// INTENTIONAL BUG: Debounce race condition\n// This hook debounces the input but doesn't cancel in-flight requests\n// If two requests resolve out of order, the UI shows stale results\nexport function useDebounce<T>(value: T, delay: number): T {\n  const [debouncedValue, setDebouncedValue] = useState<T>(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}"],
  "mappings": "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",
  "names": ["import_react", "import_react", "import_jsx_dev_runtime", "React", "_c"]
}
