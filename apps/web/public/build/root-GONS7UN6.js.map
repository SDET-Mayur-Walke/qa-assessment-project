{
  "version": 3,
  "sources": ["../../app/root.tsx", "../../app/components/Header.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app\\\\\\\\root.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app\\\\root.tsx\");\n}\n// REMIX HMR END\n\nimport { Links, Meta, Outlet, Scripts, ScrollRestoration, useLoaderData } from \"@remix-run/react\";\nimport { json } from \"@remix-run/node\";\nimport { Header } from \"./components/Header\";\nimport { createGraphQLClient, GET_ME, GET_CART } from \"./lib/graphql-client\";\nimport { getSessionId, setSessionIdCookie } from \"./lib/session\";\nimport tailwindStyles from \"./tailwind.css?url\";\nexport const links = () => [{\n  rel: \"stylesheet\",\n  href: tailwindStyles\n}, {\n  rel: \"preconnect\",\n  href: \"https://fonts.googleapis.com\"\n}, {\n  rel: \"preconnect\",\n  href: \"https://fonts.gstatic.com\",\n  crossOrigin: \"anonymous\"\n}, {\n  rel: \"stylesheet\",\n  href: \"https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,300..900;1,14..32,300..900&display=swap\"\n}];\nexport async function loader({\n  request\n}) {\n  // Read auth token from cookies\n  const cookieHeader = request.headers.get(\"Cookie\");\n  const token = cookieHeader?.split(\";\").find(cookie => cookie.trim().startsWith(\"auth-token=\"))?.split(\"=\")[1] || \"\";\n\n  // Get or generate session ID\n  const sessionId = getSessionId(request);\n  const client = createGraphQLClient(token, undefined, sessionId);\n  try {\n    const [userResult, cartResult] = await Promise.allSettled([client.request(GET_ME), client.request(GET_CART)]);\n    const user = userResult.status === \"fulfilled\" ? userResult.value.me : null;\n    const cart = cartResult.status === \"fulfilled\" ? cartResult.value.cart : {\n      items: []\n    };\n    const cartCount = cart.items?.reduce((sum, item) => sum + item.quantity, 0) || 0;\n\n    // Set session cookie if it's a new session\n    const hasSessionCookie = cookieHeader?.includes(\"session-id=\");\n    const headers = hasSessionCookie ? undefined : new Headers([[\"Set-Cookie\", setSessionIdCookie(sessionId)]]);\n    return json({\n      user,\n      cartCount,\n      sessionId\n    }, headers ? {\n      headers\n    } : {});\n  } catch (error) {\n    // Set session cookie even for errors if it's a new session\n    const hasSessionCookie = cookieHeader?.includes(\"session-id=\");\n    const headers = hasSessionCookie ? undefined : new Headers([[\"Set-Cookie\", setSessionIdCookie(sessionId)]]);\n    return json({\n      user: null,\n      cartCount: 0,\n      sessionId\n    }, headers ? {\n      headers\n    } : {});\n  }\n}\nexport default function App() {\n  _s();\n  const {\n    user,\n    cartCount\n  } = useLoaderData();\n  return <html lang=\"en\">\n      <head>\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n        <Meta />\n        <Links />\n      </head>\n      <body>\n        <Header user={user} cartCount={cartCount} />\n        <main>\n          <Outlet />\n        </main>\n        <ScrollRestoration />\n        <Scripts />\n      </body>\n    </html>;\n}\n_s(App, \"4Z9660juUfZXmgimGdr8vcOUVuo=\", false, function () {\n  return [useLoaderData];\n});\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app\\\\\\\\components\\\\\\\\Header.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app\\\\components\\\\Header.tsx\");\n  import.meta.hot.lastModified = \"1758340726710.7732\";\n}\n// REMIX HMR END\n\nimport { Link, Form } from \"@remix-run/react\";\nexport function Header({\n  user,\n  cartCount = 0\n}) {\n  return <header className=\"bg-white border-b border-gray-200\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-16\">\n          <div className=\"flex items-center\">\n            <Link to=\"/\" className=\"text-xl font-bold text-gray-900\">\n              \u2615 Coffee Shop\n            </Link>\n          </div>\n          \n          <nav className=\"flex items-center space-x-8\">\n            <Link to=\"/\" className=\"text-gray-700 hover:text-gray-900\">\n              Products\n            </Link>\n            \n            <Link to=\"/cart\" className=\"text-gray-700 hover:text-gray-900 relative\">\n              Cart\n              {cartCount > 0 && <span data-testid=\"cart-count\" className=\"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">\n                  {cartCount}\n                </span>}\n            </Link>\n\n            {user ? <div className=\"flex items-center space-x-4\">\n                <Link to=\"/orders\" className=\"text-gray-700 hover:text-gray-900\">\n                  Orders\n                </Link>\n                <span className=\"text-sm text-gray-600\">\n                  {user.name || user.email}\n                </span>\n                <Form method=\"post\" action=\"/logout\">\n                  <button type=\"submit\" className=\"text-gray-700 hover:text-gray-900\">\n                    Logout\n                  </button>\n                </Form>\n              </div> : <Link to=\"/login\" className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700\">\n                Login\n              </Link>}\n          </nav>\n        </div>\n      </div>\n    </header>;\n}\n_c = Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": ["import_jsx_dev_runtime", "_c"]
}
